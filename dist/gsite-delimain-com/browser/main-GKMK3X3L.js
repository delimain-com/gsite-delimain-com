import{a as $t}from"./chunk-STMTTTLT.js";import{b as Tt}from"./chunk-2LQJTOAD.js";import"./chunk-QOPUWJ4Y.js";import{a as Lt}from"./chunk-ENT527JW.js";import{b as kt,c as Nt,d as Rt,e as Dt,f as Et,g as At,m as Vt,n as I}from"./chunk-7EOUQJMG.js";import{a as P}from"./chunk-JJDOQ2SR.js";import{a as Mt}from"./chunk-IWQRVQVU.js";import"./chunk-2PMXO643.js";import{B as T,h as gt,k as Ct,l as _t,m as ht,n as bt,o as yt,p as vt,q as xt,r as St,s as wt,t as J,u as E,w as A,x as v,y as V}from"./chunk-G7T3ZPIR.js";import{$b as B,Ab as d,Bb as pt,C as Z,Cb as lt,D as tt,Db as mt,Gb as w,Hb as ct,J as h,Kb as S,Lb as p,Sa as nt,U as f,Va as l,Wb as dt,Yb as u,_ as et,ac as q,bc as U,cc as ut,da as n,dc as z,ec as G,fb as g,fc as ft,ha as ot,j as Y,ja as b,jc as H,ka as y,na as R,rb as m,sb as c,t as O,ta as it,tb as at,ua as _,vb as rt,wb as st,xb as D,yb as r,zb as s}from"./chunk-SHRHIQVS.js";var It=[{path:"",children:[{path:"",loadComponent:()=>import("./chunk-F7E3RXDX.js")},{path:"home",loadComponent:()=>import("./chunk-F7E3RXDX.js")},{path:"siteList",loadComponent:()=>import("./chunk-SLUQIYA6.js")},{path:"castList",loadComponent:()=>import("./chunk-VP32VQ73.js")},{path:"castEdit",loadComponent:()=>import("./chunk-R6CR5RV7.js")},{path:"castAdd",loadComponent:()=>import("./chunk-EJ7WA5P3.js")},{path:"castScheduleDatetimeList",loadComponent:()=>import("./chunk-Y7NBL6F4.js")},{path:"infoList",loadComponent:()=>import("./chunk-YX26TBU6.js")},{path:"infoEdit",loadComponent:()=>import("./chunk-3U4SAXH7.js")},{path:"infoAdd",loadComponent:()=>import("./chunk-VWHDOFFV.js")},{path:"eventList",loadComponent:()=>import("./chunk-IJOGNJB2.js")},{path:"eventEdit",loadComponent:()=>import("./chunk-OHENA5IJ.js")},{path:"eventAdd",loadComponent:()=>import("./chunk-Q4QAWMLY.js")},{path:"linkEdit",loadComponent:()=>import("./chunk-PCT3OYDX.js")},{path:"linkAdd",loadComponent:()=>import("./chunk-ITAHJBYX.js")},{path:"linkList",loadComponent:()=>import("./chunk-IEPKGCUI.js")}]}];var Pt={providers:[it(),xt(It,wt(),St({onSameUrlNavigation:"reload"}))]};var x=class t{session=n(A);$session=this.session.$session;api=n(T);login(o={}){return this.api.post("fn/auth/login",o,{ignore_auth:!0}).pipe(f(({results:e})=>{let i=e.auth||{};this.$session.set({auth:i})}))}check(){let{auth:o}=this.$session()||{},e={auth:o};return this.api.post("fn/auth/check",e,{ignore_auth:!0}).pipe(f(({results:i})=>{let a=i.auth||{};this.$session.set({auth:a})}))}logout(){let{auth:o}=this.$session(),e={auth:o};return this.$session.set(null),this.api.post("fn/auth/logout",e,{ignore_auth:!0})}static \u0275fac=function(e){return new(e||t)};static \u0275prov=et({token:t,factory:t.\u0275fac,providedIn:"root"})};function jt(t,o){if(t&1){let e=w();r(0,"div",0)(1,"div",1),d(2,"img",2)(3,"p",3),r(4,"form",4)(5,"div",5)(6,"input",6),U("ngModelChange",function(a){b(e);let C=p();return q(C.id,a)||(C.id=a),y(a)}),s()(),r(7,"div",5)(8,"input",7),U("ngModelChange",function(a){b(e);let C=p();return q(C.password,a)||(C.password=a),y(a)}),s()(),r(9,"div",8)(10,"button",9),S("click",function(){b(e);let a=p();return y(a.action_login())}),u(11," \u30ED\u30B0\u30A4\u30F3 "),s()()()(),r(12,"div",10)(13,"p",11),u(14,"\xA9 2026"),s()()()}if(t&2){let e=p();l(2),dt("fa-spin",e.$isWait()),l(4),B("ngModel",e.id),l(2),B("ngModel",e.password)}}function Ft(t,o){t&1&&(r(0,"div"),u(1,"loading..."),s())}var L=class t{$isReady=_(!1);$isWait=_(!1);id=J.id;password=J.password;api=n(T);auth=n(x);constructor(){this.$isReady.set(!0)}action_login(){let o={id:this.id,password:this.password};this.$isWait.set(!0),this.auth.login(o).pipe(h(1)).pipe(f(()=>this.$isWait.set(!1))).subscribe()}action_test(){this.api.post("fn/siteInfo/load_siteList").pipe(h(1)).subscribe()}static \u0275fac=function(e){return new(e||t)};static \u0275cmp=g({type:t,selectors:[["app-login"]],decls:2,vars:1,consts:[[1,"container"],[1,"card","card-container"],["id","profile-img","src","//ssl.gstatic.com/accounts/ui/avatar_2x.png",1,"profile-img","img-circle","rounded-circle"],["id","profile-name",1,"profile-name-card"],["novalidate","",1,"form-signin","mb10"],[1,"form-group","my-2"],["type","text","name","id","placeholder","ID","required","","autofocus","",1,"form-control",3,"ngModelChange","ngModel"],["type","password","name","password","placeholder","\u30D1\u30B9\u30EF\u30FC\u30C9","required","",1,"form-control",3,"ngModelChange","ngModel"],[1,"my-2"],[1,"btn","btn-lg","btn-primary","btn-block","w-100",3,"click"],[1,"text-center"],[1,"mt-5","mb-3","text-muted"]],template:function(e,i){e&1&&m(0,jt,15,4,"div",0)(1,Ft,2,0,"div"),e&2&&c(i.$isReady()?0:1)},dependencies:[I,At,kt,Nt,Rt,Vt,Et,Dt],styles:["body[_ngcontent-%COMP%], html[_ngcontent-%COMP%]{height:100%}.card[_ngcontent-%COMP%]{max-width:350px;padding:40px;background-color:#f7f7f7;margin:50px auto 0;-moz-border-radius:2px;-webkit-border-radius:2px;border-radius:2px;-moz-box-shadow:0px 2px 2px rgba(0,0,0,.3);-webkit-box-shadow:0px 2px 2px rgba(0,0,0,.3);box-shadow:0 2px 2px #0000004d}.profile-img[_ngcontent-%COMP%]{width:40%;height:auto;margin:0 auto;display:block}.mb10[_ngcontent-%COMP%]{margin:0 0 10px}"]})};function Q(t,o={}){return E(Q,o?.injector,()=>{let e=n(_t),i=e.snapshot.params,{parse:a,defaultValue:C}=o;if(!t)return V(e.params,{initialValue:i});if(typeof t=="function")return V(e.params.pipe(O(t)),{initialValue:t(i)});let X=Wt=>{let F=Wt?.[t];return F?a?a(F):F:C??null};return V(e.params.pipe(O(X)),{initialValue:X(i)})})}function Ot(t,o){if(t&1&&(pt(0,"div",0),mt(1,"span",1),lt()),t&2){let e=p();l(),ct("textContent",e.notifyMessage.$text())}}var $=class t{notifyMessage=n(P);static \u0275fac=function(e){return new(e||t)};static \u0275cmp=g({type:t,selectors:[["app-el-notify-message"]],decls:1,vars:1,consts:[[1,"message-box"],[1,"badge","text-black","message-text",2,"background-color","lightyellow",3,"textContent"]],template:function(e,i){e&1&&m(0,Ot,2,1,"div",0),e&2&&c(i.notifyMessage.$isMessage()?0:-1)},encapsulation:2})};function K(t){return t=E(K,t),ot(t,()=>n(yt).events.pipe(tt(o=>o instanceof Ct),v()))}var Bt=t=>[t],qt=t=>({domain:t});function Ut(t,o){if(t&1){let e=w();r(0,"a",13),S("click",function(){b(e);let a=p(3);return y(a.action_menu())}),s()}if(t&2){let e=o.$implicit;p(2);let i=G(0);D("routerLink",H(3,Bt,e.path))("queryParams",H(5,qt,i))("textContent",e.label)}}function zt(t,o){t&1&&d(0,"app-el-notify-message")(1,"router-outlet")}function Gt(t,o){t&1&&(r(0,"div"),u(1,"loading..."),s())}function Ht(t,o){if(t&1){let e=w();r(0,"div",0)(1,"aside",1)(2,"nav",2)(3,"div",3)(4,"a",4),d(5,"strong",5),s()(),r(6,"div",6)(7,"i",7),S("click",function(){b(e);let a=p(2);return y(a.action_reload())}),s()(),r(8,"div",8),rt(9,Ut,1,7,"a",9,at),r(11,"div",10),u(12,"\xA0"),s(),r(13,"button",11),S("click",function(){b(e);let a=p(2);return y(a.action_logout())}),u(14," \u30ED\u30B0\u30A2\u30A6\u30C8 "),s()()()(),r(15,"main",12),m(16,zt,2,0)(17,Gt,2,0,"div"),s()()}if(t&2){p();let e=G(1),i=p();l(4),D("href",ft("https://",e==null?null:e.domain),nt),l(),D("textContent",e==null?null:e.name),l(4),st(i.$menuList()),l(7),c(i.$isView()?16:17)}}function Jt(t,o){t&1&&d(0,"app-site-list")}function Qt(t,o){if(t&1&&(ut(0)(1),m(2,Ht,18,4,"div",0)(3,Jt,1,0,"app-site-list")),t&2){let e,i=p(),a=z(i.$domain());l();let C=z((e=i.siteInfo.$siteMap())==null?null:e[i.$domain()]);l(),c(a&&C?2:3)}}function Kt(t,o){t&1&&(r(0,"div"),u(1,"loading..."),s())}var k=class t{#t=n(R);reuseStrategy=n(bt);auth=n(x);siteInfo=n(Lt);$isReady=_(!1);$isView=_(!0);$menuList=_([{path:"home",label:"\u30DB\u30FC\u30E0"},{path:"siteList",label:"\u30B5\u30A4\u30C8\u4E00\u89A7"},{path:"castAdd",label:"\u30AD\u30E3\u30B9\u30C8\u8FFD\u52A0"},{path:"castList",label:"\u30AD\u30E3\u30B9\u30C8\u4E00\u89A7"},{path:"castScheduleDatetimeList",label:"\u30B9\u30B1\u30B8\u30E5\u30FC\u30EB"},{path:"infoAdd",label:"\u65B0\u7740\u8FFD\u52A0"},{path:"infoList",label:"\u65B0\u7740\u4E00\u89A7"},{path:"eventAdd",label:"\u30A4\u30D9\u30F3\u30C8\u8FFD\u52A0"},{path:"eventList",label:"\u30A4\u30D9\u30F3\u30C8\u4E00\u89A7"}]);$domain=Mt("domain");notifyMessage=n(P);navigationEnd$=K();reload$=new Y;modal=n(Tt);constructor(){Z(this.navigationEnd$,this.reload$).pipe(v(this.#t),f(()=>{this.notifyMessage.close(),this.modal.dismissAll(),setTimeout(()=>this.$isView.set(!0))})).subscribe(),this.siteInfo.load().pipe(v(this.#t),f(()=>this.$isReady.set(!0)),h(1)).subscribe()}action_menu(){this.$isView.set(!1)}action_reload(){this.$isView.set(!1),this.reload$.next()}action_logout(){this.auth.logout().pipe(v(this.#t)).pipe(h(1)).subscribe()}static \u0275fac=function(e){return new(e||t)};static \u0275cmp=g({type:t,selectors:[["app-layout"]],decls:2,vars:1,consts:[[1,"layout-container","m-0","p-0"],[1,"sidebar","m-0","p-0"],[1,"m-0","p-0"],[1,"bg-primary","text-center","p-1"],["target","_blank",1,"text-white","text-decoration-none",3,"href"],[3,"textContent"],[1,"bg-black","text-center","p-1","text-white"],[1,"fa","fa-refresh","fa-hover","cursor-pointer",3,"click"],[1,"list-group","m-0","p-0","mt-5","rounded-0"],[1,"list-group-item","rounded-0","m-0",3,"routerLink","queryParams","textContent"],[1,"list-group-item"],[1,"btn","btn-danger","rounded-0","m-0",3,"click"],[1,"main-content","m-0","p-0","overflow-y-hidden","user-select-none"],[1,"list-group-item","rounded-0","m-0",3,"click","routerLink","queryParams","textContent"]],template:function(e,i){e&1&&m(0,Qt,4,3)(1,Kt,2,0,"div"),e&2&&c(i.$isReady()?0:1)},dependencies:[ht,vt,$t,$],styles:['@charset "UTF-8";[_nghost-%COMP%]{display:block;width:100%;height:100vh}.layout-container[_ngcontent-%COMP%]{display:grid;grid-template-columns:250px 1fr;height:100%;width:100%;overflow:hidden}.sidebar[_ngcontent-%COMP%]{background-color:#f8f9fa;border-right:1px solid #dee2e6;overflow-y:auto;padding:1rem}.main-content[_ngcontent-%COMP%]{background-color:#fff;overflow-y:auto;padding:2rem}']})};function Xt(t,o){t&1&&d(0,"app-layout")}function Yt(t,o){t&1&&d(0,"app-login")}function Zt(t,o){if(t&1&&m(0,Xt,1,0,"app-layout")(1,Yt,1,0,"app-login"),t&2){let e,i=p();c(!((e=i.$session())==null||e.auth==null)&&e.auth.isLogin?0:1)}}function te(t,o){t&1&&(r(0,"div"),u(1,"loading..."),s())}var N=class t{#t=n(R);auth=n(x);session=n(A);$domain=Q("domain");$session=this.session.$session;$isReady=_(!1);constructor(){this.auth.check().pipe(v(this.#t)).pipe(f(()=>this.$isReady.set(!0))).pipe(h(1)).subscribe()}static \u0275fac=function(e){return new(e||t)};static \u0275cmp=g({type:t,selectors:[["app-component-root"]],hostAttrs:[1,"p-0","m-0"],decls:2,vars:1,template:function(e,i){e&1&&m(0,Zt,2,1)(1,te,2,0,"div"),e&2&&c(i.$isReady()?0:1)},dependencies:[I,L,k],encapsulation:2})};var j=class t{static \u0275fac=function(e){return new(e||t)};static \u0275cmp=g({type:t,selectors:[["app-root"]],decls:1,vars:0,template:function(e,i){e&1&&d(0,"app-component-root")},dependencies:[N],encapsulation:2})};gt(j,Pt).catch(t=>console.error(t));
