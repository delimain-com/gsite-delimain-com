import{a as ie,b as z,c as E,d as se,e as V,f as c,g as ne,h as oe,i as b,j as ae}from"./chunk-QOPUWJ4Y.js";import{Ba as O,Bb as Z,Cb as G,Cc as R,D,F as w,J as j,Mb as J,Nb as X,Pb as Y,Qb as ee,Rb as te,S as P,T as f,U as K,Wb as H,Xb as C,Za as A,_ as v,_a as q,a as F,b as L,da as a,fb as S,ga as I,j as d,la as u,ma as T,o as x,pa as M,pb as Q,qa as g,qb as U,yc as W,z as p}from"./chunk-SHRHIQVS.js";var re=["dialog"],de=["*"],ce=(()=>{class s{constructor(){this._ngbConfig=a(ie),this.backdrop=!0,this.fullscreen=!1,this.keyboard=!0,this.role="dialog"}get animation(){return this._animation??this._ngbConfig.animation}set animation(e){this._animation=e}static{this.\u0275fac=function(t){return new(t||s)}}static{this.\u0275prov=v({token:s,factory:s.\u0275fac,providedIn:"root"})}}return s})(),le=["animation","backdropClass"],he=(()=>{class s{constructor(){this._nativeElement=a(O).nativeElement,this._zone=a(g),this._injector=a(u),this._cdRef=a(W)}ngOnInit(){A({mixedReadWrite:()=>c(this._zone,this._nativeElement,(e,t)=>{t&&V(e),e.classList.add("show")},{animation:this.animation,runningTransition:"continue"})},{injector:this._injector})}hide(){return c(this._zone,this._nativeElement,({classList:e})=>e.remove("show"),{animation:this.animation,runningTransition:"stop"})}updateOptions(e){le.forEach(t=>{E(e[t])&&(this[t]=e[t])}),this._cdRef.markForCheck()}static{this.\u0275fac=function(t){return new(t||s)}}static{this.\u0275cmp=S({type:s,selectors:[["ngb-modal-backdrop"]],hostAttrs:[2,"z-index","1055"],hostVars:6,hostBindings:function(t,i){t&2&&(C("modal-backdrop"+(i.backdropClass?" "+i.backdropClass:"")),H("show",!i.animation)("fade",i.animation))},inputs:{animation:"animation",backdropClass:"backdropClass"},decls:0,vars:0,template:function(t,i){},encapsulation:2})}}return s})(),k=class{update(o){}close(o){}dismiss(o){}},$=class{update(o){this._windowCmptRef.instance.updateOptions(o),this._backdropCmptRef&&this._backdropCmptRef.instance&&this._backdropCmptRef.instance.updateOptions(o)}get componentInstance(){if(this._contentRef&&this._contentRef.componentRef)return this._contentRef.componentRef.instance}get closed(){return this._closed.asObservable().pipe(f(this._hidden))}get dismissed(){return this._dismissed.asObservable().pipe(f(this._hidden))}get hidden(){return this._hidden.asObservable()}get shown(){return this._windowCmptRef.instance.shown.asObservable()}constructor(o,e,t,i){this._windowCmptRef=o,this._contentRef=e,this._backdropCmptRef=t,this._beforeDismiss=i,this._closed=new d,this._dismissed=new d,this._hidden=new d,o.instance.dismissEvent.subscribe(n=>{this.dismiss(n)}),this.result=new Promise((n,r)=>{this._resolve=n,this._reject=r}),this.result.then(null,()=>{})}close(o){this._windowCmptRef&&(this._closed.next(o),this._resolve(o),this._removeModalElements())}_dismiss(o){this._dismissed.next(o),this._reject(o),this._removeModalElements()}dismiss(o){if(this._windowCmptRef)if(!this._beforeDismiss)this._dismiss(o);else{let e=this._beforeDismiss();se(e)?e.then(t=>{t!==!1&&this._dismiss(o)},()=>{}):e!==!1&&this._dismiss(o)}}_removeModalElements(){let o=this._windowCmptRef.instance.hide(),e=this._backdropCmptRef?this._backdropCmptRef.instance.hide():x(void 0);o.subscribe(()=>{let{nativeElement:t}=this._windowCmptRef.location;t.parentNode.removeChild(t),this._windowCmptRef.destroy(),this._contentRef?.viewRef?.destroy(),this._windowCmptRef=null,this._contentRef=null}),e.subscribe(()=>{if(this._backdropCmptRef){let{nativeElement:t}=this._backdropCmptRef.location;t.parentNode.removeChild(t),this._backdropCmptRef.destroy(),this._backdropCmptRef=null}}),w(o,e).subscribe(()=>{this._hidden.next(),this._hidden.complete()})}},N=(function(s){return s[s.BACKDROP_CLICK=0]="BACKDROP_CLICK",s[s.ESC=1]="ESC",s})(N||{}),me=["animation","ariaLabelledBy","ariaDescribedBy","backdrop","centered","fullscreen","keyboard","role","scrollable","size","windowClass","modalDialogClass"],fe=(()=>{class s{constructor(){this._document=a(T),this._elRef=a(O),this._zone=a(g),this._injector=a(u),this._cdRef=a(W),this._closed$=new d,this._elWithFocus=null,this.backdrop=!0,this.keyboard=!0,this.role="dialog",this.dismissEvent=new M,this.shown=new d,this.hidden=new d}get fullscreenClass(){return this.fullscreen===!0?" modal-fullscreen":z(this.fullscreen)?` modal-fullscreen-${this.fullscreen}-down`:""}dismiss(e){this.dismissEvent.emit(e)}ngOnInit(){this._elWithFocus=this._document.activeElement,A({mixedReadWrite:()=>this._show()},{injector:this._injector})}ngOnDestroy(){this._disableEventHandling()}hide(){let{nativeElement:e}=this._elRef,t={animation:this.animation,runningTransition:"stop"},i=c(this._zone,e,()=>e.classList.remove("show"),t),n=c(this._zone,this._dialogEl.nativeElement,()=>{},t),r=w(i,n);return r.subscribe(()=>{this.hidden.next(),this.hidden.complete()}),this._disableEventHandling(),this._restoreFocus(),r}updateOptions(e){me.forEach(t=>{E(e[t])&&(this[t]=e[t])}),this._cdRef.markForCheck()}_show(){let e={animation:this.animation,runningTransition:"continue"},t=c(this._zone,this._elRef.nativeElement,(n,r)=>{r&&V(n),n.classList.add("show")},e),i=c(this._zone,this._dialogEl.nativeElement,()=>{},e);w(t,i).subscribe(()=>{this.shown.next(),this.shown.complete()}),this._enableEventHandling(),this._setFocus()}_enableEventHandling(){let{nativeElement:e}=this._elRef;this._zone.runOutsideAngular(()=>{p(e,"keydown").pipe(f(this._closed$),D(i=>i.key==="Escape")).subscribe(i=>{this.keyboard?requestAnimationFrame(()=>{i.defaultPrevented||this._zone.run(()=>this.dismiss(N.ESC))}):this.backdrop==="static"&&this._bumpBackdrop()});let t=!1;p(this._dialogEl.nativeElement,"mousedown").pipe(f(this._closed$),K(()=>t=!1),P(()=>p(e,"mouseup").pipe(f(this._closed$),j(1))),D(({target:i})=>e===i)).subscribe(()=>{t=!0}),p(e,"click").pipe(f(this._closed$)).subscribe(({target:i})=>{e===i&&(this.backdrop==="static"?this._bumpBackdrop():this.backdrop===!0&&!t&&this._zone.run(()=>this.dismiss(N.BACKDROP_CLICK))),t=!1})})}_disableEventHandling(){this._closed$.next()}_setFocus(){let{nativeElement:e}=this._elRef;if(!e.contains(document.activeElement)){let t=e.querySelector("[ngbAutofocus]"),i=ne(e)[0];(t||i||e).focus()}}_restoreFocus(){let e=this._document.body,t=this._elWithFocus,i;t&&t.focus&&e.contains(t)?i=t:i=e,this._zone.runOutsideAngular(()=>{setTimeout(()=>i.focus()),this._elWithFocus=null})}_bumpBackdrop(){this.backdrop==="static"&&c(this._zone,this._elRef.nativeElement,({classList:e})=>(e.add("modal-static"),()=>e.remove("modal-static")),{animation:this.animation,runningTransition:"continue"})}static{this.\u0275fac=function(t){return new(t||s)}}static{this.\u0275cmp=S({type:s,selectors:[["ngb-modal-window"]],viewQuery:function(t,i){if(t&1&&Y(re,7),t&2){let n;ee(n=te())&&(i._dialogEl=n.first)}},hostAttrs:["tabindex","-1"],hostVars:8,hostBindings:function(t,i){t&2&&(U("aria-modal",!0)("aria-labelledby",i.ariaLabelledBy)("aria-describedby",i.ariaDescribedBy)("role",i.role),C("modal d-block"+(i.windowClass?" "+i.windowClass:"")),H("fade",i.animation))},inputs:{animation:"animation",ariaLabelledBy:"ariaLabelledBy",ariaDescribedBy:"ariaDescribedBy",backdrop:"backdrop",centered:"centered",fullscreen:"fullscreen",keyboard:"keyboard",role:"role",scrollable:"scrollable",size:"size",windowClass:"windowClass",modalDialogClass:"modalDialogClass"},outputs:{dismissEvent:"dismiss"},ngContentSelectors:de,decls:4,vars:2,consts:[["dialog",""],["role","document"],[1,"modal-content"]],template:function(t,i){t&1&&(J(),Z(0,"div",1,0)(2,"div",2),X(3),G()()),t&2&&C("modal-dialog"+(i.size?" modal-"+i.size:"")+(i.centered?" modal-dialog-centered":"")+i.fullscreenClass+(i.scrollable?" modal-dialog-scrollable":"")+(i.modalDialogClass?" "+i.modalDialogClass:""))},styles:[`ngb-modal-window .component-host-scrollable{display:flex;flex-direction:column;overflow:hidden}
`],encapsulation:2})}}return s})(),ue=(()=>{class s{constructor(){this._applicationRef=a(Q),this._injector=a(u),this._environmentInjector=a(I),this._document=a(T),this._scrollBar=a(ae),this._activeWindowCmptHasChanged=new d,this._ariaHiddenValues=new Map,this._scrollBarRestoreFn=null,this._modalRefs=[],this._windowCmpts=[],this._activeInstances=new M;let e=a(g);this._activeWindowCmptHasChanged.subscribe(()=>{if(this._windowCmpts.length){let t=this._windowCmpts[this._windowCmpts.length-1];oe(e,t.location.nativeElement,this._activeWindowCmptHasChanged),this._revertAriaHidden(),this._setAriaHidden(t.location.nativeElement)}})}_restoreScrollBar(){let e=this._scrollBarRestoreFn;e&&(this._scrollBarRestoreFn=null,e())}_hideScrollBar(){this._scrollBarRestoreFn||(this._scrollBarRestoreFn=this._scrollBar.hide())}open(e,t,i){let n=i.container instanceof HTMLElement?i.container:E(i.container)?this._document.querySelector(i.container):this._document.body;if(!n)throw new Error(`The specified modal container "${i.container||"body"}" was not found in the DOM.`);this._hideScrollBar();let r=new k;e=i.injector||e;let y=e.get(I,null)||this._environmentInjector,l=this._getContentRef(e,y,t,r,i),h=i.backdrop!==!1?this._attachBackdrop(n):void 0,B=this._attachWindowComponent(n,l.nodes),m=new $(B,l,h,i.beforeDismiss);return this._registerModalRef(m),this._registerWindowCmpt(B),m.hidden.pipe(j(1)).subscribe(()=>Promise.resolve(!0).then(()=>{this._modalRefs.length||(this._document.body.classList.remove("modal-open"),this._restoreScrollBar(),this._revertAriaHidden())})),r.close=_=>{m.close(_)},r.dismiss=_=>{m.dismiss(_)},r.update=_=>{m.update(_)},m.update(i),this._modalRefs.length===1&&this._document.body.classList.add("modal-open"),h&&h.instance&&h.changeDetectorRef.detectChanges(),B.changeDetectorRef.detectChanges(),m}get activeInstances(){return this._activeInstances}dismissAll(e){this._modalRefs.forEach(t=>t.dismiss(e))}hasOpenModals(){return this._modalRefs.length>0}_attachBackdrop(e){let t=R(he,{environmentInjector:this._applicationRef.injector,elementInjector:this._injector});return this._applicationRef.attachView(t.hostView),e.appendChild(t.location.nativeElement),t}_attachWindowComponent(e,t){let i=R(fe,{environmentInjector:this._applicationRef.injector,elementInjector:this._injector,projectableNodes:t});return this._applicationRef.attachView(i.hostView),e.appendChild(i.location.nativeElement),i}_getContentRef(e,t,i,n,r){return i?i instanceof q?this._createFromTemplateRef(i,n):z(i)?this._createFromString(i):this._createFromComponent(e,t,i,n,r):new b([])}_createFromTemplateRef(e,t){let i={$implicit:t,close(r){t.close(r)},dismiss(r){t.dismiss(r)}},n=e.createEmbeddedView(i);return this._applicationRef.attachView(n),new b([n.rootNodes],n)}_createFromString(e){let t=this._document.createTextNode(`${e}`);return new b([[t]])}_createFromComponent(e,t,i,n,r){let y=u.create({providers:[{provide:k,useValue:n}],parent:e}),l=R(i,{environmentInjector:t,elementInjector:y}),h=l.location.nativeElement;return r.scrollable&&h.classList.add("component-host-scrollable"),this._applicationRef.attachView(l.hostView),new b([[h]],l.hostView,l)}_setAriaHidden(e){let t=e.parentElement;t&&e!==this._document.body&&(Array.from(t.children).forEach(i=>{i!==e&&i.nodeName!=="SCRIPT"&&(this._ariaHiddenValues.set(i,i.getAttribute("aria-hidden")),i.setAttribute("aria-hidden","true"))}),this._setAriaHidden(t))}_revertAriaHidden(){this._ariaHiddenValues.forEach((e,t)=>{e?t.setAttribute("aria-hidden",e):t.removeAttribute("aria-hidden")}),this._ariaHiddenValues.clear()}_registerModalRef(e){let t=()=>{let i=this._modalRefs.indexOf(e);i>-1&&(this._modalRefs.splice(i,1),this._activeInstances.emit(this._modalRefs))};this._modalRefs.push(e),this._activeInstances.emit(this._modalRefs),e.result.then(t,t)}_registerWindowCmpt(e){this._windowCmpts.push(e),this._activeWindowCmptHasChanged.next(),e.onDestroy(()=>{let t=this._windowCmpts.indexOf(e);t>-1&&(this._windowCmpts.splice(t,1),this._activeWindowCmptHasChanged.next())})}static{this.\u0275fac=function(t){return new(t||s)}}static{this.\u0275prov=v({token:s,factory:s.\u0275fac,providedIn:"root"})}}return s})(),Ie=(()=>{class s{constructor(){this._injector=a(u),this._modalStack=a(ue),this._config=a(ce)}open(e,t={}){let i=F(L(F({},this._config),{animation:this._config.animation}),t);return this._modalStack.open(this._injector,e,i)}get activeInstances(){return this._modalStack.activeInstances}dismissAll(e){this._modalStack.dismissAll(e)}hasOpenModals(){return this._modalStack.hasOpenModals()}static{this.\u0275fac=function(t){return new(t||s)}}static{this.\u0275prov=v({token:s,factory:s.\u0275fac,providedIn:"root"})}}return s})();export{k as a,Ie as b};
