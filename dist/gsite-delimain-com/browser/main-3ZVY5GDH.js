import{a as Mt}from"./chunk-22K6VT6F.js";import{a as wt}from"./chunk-GUTABKTZ.js";import{b as Lt,c as $t,d as Rt,e as Dt,f as kt,g as Nt,m as Et,n as I,p as P}from"./chunk-MZI3TSC7.js";import{a as St}from"./chunk-AK7IFNAC.js";import{A as T,h as ut,k as ft,l as gt,m as Ct,n as _t,o as ht,p as bt,q as yt,r as vt,s as xt,t as Q,u as E,w as A,x as v,y as V}from"./chunk-QS74EYGS.js";import{$b as G,Ab as st,Bb as pt,D as Y,Eb as w,Fb as lt,I as h,Ib as S,Jb as s,Qa as ot,Sb as mt,T as u,Ta as l,Tb as g,Wb as B,Xb as q,Y as Z,Yb as U,Zb as ct,_b as z,ac as dt,ba as a,db as f,ec as H,fa as tt,ha as b,ia as y,la as k,pb as m,qb as c,ra as et,rb as it,sa as _,t as O,tb as nt,ub as at,vb as N,wb as r,xb as p,yb as d,zb as rt}from"./chunk-J3CZU5IE.js";var At=[{path:"",children:[{path:"",loadComponent:()=>import("./chunk-NBEP3QMA.js")},{path:"home",loadComponent:()=>import("./chunk-NBEP3QMA.js")},{path:"siteList",loadComponent:()=>import("./chunk-6JGDXTC3.js")},{path:"castList",loadComponent:()=>import("./chunk-Y4KW2RJ7.js")},{path:"castEdit",loadComponent:()=>import("./chunk-U6IF6ZBF.js")},{path:"castAdd",loadComponent:()=>import("./chunk-F5DK5VNO.js")},{path:"castScheduleDatetimeList",loadComponent:()=>import("./chunk-E53H6GNO.js")},{path:"infoList",loadComponent:()=>import("./chunk-XWL6BLCU.js")},{path:"infoEdit",loadComponent:()=>import("./chunk-ZZ7WFU5N.js")},{path:"infoAdd",loadComponent:()=>import("./chunk-SOQ6WCUM.js")},{path:"eventList",loadComponent:()=>import("./chunk-OHFVMLT6.js")},{path:"eventEdit",loadComponent:()=>import("./chunk-BBA2FZNI.js")},{path:"eventAdd",loadComponent:()=>import("./chunk-2TSU3XET.js")}]}];var Vt={providers:[et(),yt(At,xt(),vt({onSameUrlNavigation:"reload"}))]};var x=class t{session=a(A);$session=this.session.$session;api=a(T);login(o={}){return this.api.post("fn/auth/login",o,{ignore_auth:!0}).pipe(u(({results:e})=>{let i=e.auth||{};this.$session.set({auth:i})}))}check(){let{auth:o}=this.$session()||{},e={auth:o};return this.api.post("fn/auth/check",e,{ignore_auth:!0}).pipe(u(({results:i})=>{let n=i.auth||{};this.$session.set({auth:n})}))}logout(){let{auth:o}=this.$session(),e={auth:o};return this.$session.set(null),this.api.post("fn/auth/logout",e,{ignore_auth:!0})}static \u0275fac=function(e){return new(e||t)};static \u0275prov=Z({token:t,factory:t.\u0275fac,providedIn:"root"})};function It(t,o){if(t&1){let e=w();r(0,"div",0)(1,"div",1),d(2,"img",2)(3,"p",3),r(4,"form",4)(5,"div",5)(6,"input",6),U("ngModelChange",function(n){b(e);let C=s();return q(C.id,n)||(C.id=n),y(n)}),p()(),r(7,"div",5)(8,"input",7),U("ngModelChange",function(n){b(e);let C=s();return q(C.password,n)||(C.password=n),y(n)}),p()(),r(9,"div",8)(10,"button",9),S("click",function(){b(e);let n=s();return y(n.action_login())}),g(11," \u30ED\u30B0\u30A4\u30F3 "),p()()()(),r(12,"div",10)(13,"p",11),g(14,"\xA9 2026"),p()()()}if(t&2){let e=s();l(2),mt("fa-spin",e.$isWait()),l(4),B("ngModel",e.id),l(2),B("ngModel",e.password)}}function Pt(t,o){t&1&&(r(0,"div"),g(1,"loading..."),p())}var L=class t{$isReady=_(!1);$isWait=_(!1);id=Q.id;password=Q.password;api=a(T);auth=a(x);constructor(){this.$isReady.set(!0)}action_login(){let o={id:this.id,password:this.password};this.$isWait.set(!0),this.auth.login(o).pipe(h(1)).pipe(u(()=>this.$isWait.set(!1))).subscribe()}action_test(){this.api.post("fn/siteInfo/load_siteList").pipe(h(1)).subscribe()}static \u0275fac=function(e){return new(e||t)};static \u0275cmp=f({type:t,selectors:[["app-login"]],decls:2,vars:1,consts:[[1,"container"],[1,"card","card-container"],["id","profile-img","src","//ssl.gstatic.com/accounts/ui/avatar_2x.png",1,"profile-img","img-circle","rounded-circle"],["id","profile-name",1,"profile-name-card"],["novalidate","",1,"form-signin","mb10"],[1,"form-group","my-2"],["type","text","name","id","placeholder","ID","required","","autofocus","",1,"form-control",3,"ngModelChange","ngModel"],["type","password","name","password","placeholder","\u30D1\u30B9\u30EF\u30FC\u30C9","required","",1,"form-control",3,"ngModelChange","ngModel"],[1,"my-2"],[1,"btn","btn-lg","btn-primary","btn-block","w-100",3,"click"],[1,"text-center"],[1,"mt-5","mb-3","text-muted"]],template:function(e,i){e&1&&m(0,It,15,4,"div",0)(1,Pt,2,0,"div"),e&2&&c(i.$isReady()?0:1)},dependencies:[I,Nt,Lt,$t,Rt,Et,kt,Dt],styles:["body[_ngcontent-%COMP%], html[_ngcontent-%COMP%]{height:100%}.card[_ngcontent-%COMP%]{max-width:350px;padding:40px;background-color:#f7f7f7;margin:50px auto 0;-moz-border-radius:2px;-webkit-border-radius:2px;border-radius:2px;-moz-box-shadow:0px 2px 2px rgba(0,0,0,.3);-webkit-box-shadow:0px 2px 2px rgba(0,0,0,.3);box-shadow:0 2px 2px #0000004d}.profile-img[_ngcontent-%COMP%]{width:40%;height:auto;margin:0 auto;display:block}.mb10[_ngcontent-%COMP%]{margin:0 0 10px}"]})};function J(t,o={}){return E(J,o?.injector,()=>{let e=a(gt),i=e.snapshot.params,{parse:n,defaultValue:C}=o;if(!t)return V(e.params,{initialValue:i});if(typeof t=="function")return V(e.params.pipe(O(t)),{initialValue:t(i)});let X=Tt=>{let j=Tt?.[t];return j?n?n(j):j:C??null};return V(e.params.pipe(O(X)),{initialValue:X(i)})})}function Wt(t,o){if(t&1&&(rt(0,"div",0),pt(1,"span",1),st()),t&2){let e=s();l(),lt("textContent",e.notifyMessage.$text())}}var $=class t{notifyMessage=a(P);static \u0275fac=function(e){return new(e||t)};static \u0275cmp=f({type:t,selectors:[["app-el-notify-message"]],decls:1,vars:1,consts:[[1,"message-box"],[1,"badge","text-black","message-text",2,"background-color","lightyellow",3,"textContent"]],template:function(e,i){e&1&&m(0,Wt,2,1,"div",0),e&2&&c(i.notifyMessage.$isMessage()?0:-1)},encapsulation:2})};function K(t){return t=E(K,t),tt(t,()=>a(ht).events.pipe(Y(o=>o instanceof ft),v()))}var Ft=t=>[t],jt=t=>({domain:t});function Ot(t,o){if(t&1){let e=w();r(0,"a",13),S("click",function(){b(e);let n=s(3);return y(n.action_reload())}),p()}if(t&2){let e=o.$implicit;s(2);let i=G(0);N("routerLink",H(3,Ft,e.path))("queryParams",H(5,jt,i))("textContent",e.label)}}function Bt(t,o){t&1&&d(0,"app-el-notify-message")(1,"router-outlet")}function qt(t,o){if(t&1){let e=w();r(0,"div",0)(1,"aside",1)(2,"nav",2)(3,"div",3)(4,"a",4),d(5,"strong",5),p()(),r(6,"div",6)(7,"i",7),S("click",function(){b(e);let n=s(2);return y(n.action_reload())}),p()(),r(8,"div",8),nt(9,Ot,1,7,"a",9,it),r(11,"div",10),g(12,"\xA0"),p(),r(13,"button",11),S("click",function(){b(e);let n=s(2);return y(n.action_logout())}),g(14," \u30ED\u30B0\u30A2\u30A6\u30C8 "),p()()()(),r(15,"main",12),m(16,Bt,2,0),p()()}if(t&2){s();let e=G(1),i=s();l(4),N("href",dt("https://",e==null?null:e.domain),ot),l(),N("textContent",e==null?null:e.name),l(4),at(i.$menuList()),l(7),c(i.$isView()?16:-1)}}function Ut(t,o){t&1&&d(0,"app-site-list")}function zt(t,o){if(t&1&&(ct(0)(1),m(2,qt,17,4,"div",0)(3,Ut,1,0,"app-site-list")),t&2){let e,i=s(),n=z(i.$domain());l();let C=z((e=i.siteInfo.$siteMap())==null?null:e[i.$domain()]);l(),c(n&&C?2:3)}}function Gt(t,o){t&1&&(r(0,"div"),g(1,"loading..."),p())}var R=class t{#t=a(k);reuseStrategy=a(_t);auth=a(x);siteInfo=a(wt);$isReady=_(!1);$isView=_(!0);$menuList=_([{path:"home",label:"\u30DB\u30FC\u30E0"},{path:"siteList",label:"\u30B5\u30A4\u30C8\u4E00\u89A7"},{path:"castAdd",label:"\u30AD\u30E3\u30B9\u30C8\u8FFD\u52A0"},{path:"castList",label:"\u30AD\u30E3\u30B9\u30C8\u4E00\u89A7"},{path:"castScheduleDatetimeList",label:"\u30B9\u30B1\u30B8\u30E5\u30FC\u30EB"},{path:"infoAdd",label:"\u65B0\u7740\u8FFD\u52A0"},{path:"infoList",label:"\u65B0\u7740\u4E00\u89A7"},{path:"eventAdd",label:"\u30A4\u30D9\u30F3\u30C8\u8FFD\u52A0"},{path:"eventList",label:"\u30A4\u30D9\u30F3\u30C8\u4E00\u89A7"}]);$domain=St("domain");notifyMessage=a(P);navigationEnd$=K();constructor(){this.navigationEnd$.pipe(v(this.#t),u(()=>this.notifyMessage.close())).subscribe(),this.siteInfo.load().pipe(v(this.#t),u(()=>this.$isReady.set(!0)),h(1)).subscribe()}action_reload(){this.$isView.set(!1),this.notifyMessage.close(),setTimeout(()=>this.$isView.set(!0))}action_logout(){this.auth.logout().pipe(v(this.#t)).pipe(h(1)).subscribe()}static \u0275fac=function(e){return new(e||t)};static \u0275cmp=f({type:t,selectors:[["app-layout"]],decls:2,vars:1,consts:[[1,"layout-container","m-0","p-0"],[1,"sidebar","m-0","p-0"],[1,"m-0","p-0"],[1,"bg-primary","text-center","p-1"],["target","_blank",1,"text-white","text-decoration-none",3,"href"],[3,"textContent"],[1,"bg-black","text-center","p-1","text-white"],[1,"fa","fa-refresh","fa-hover","cursor-pointer",3,"click"],[1,"list-group","m-0","p-0","mt-5","rounded-0"],[1,"list-group-item","rounded-0","m-0",3,"routerLink","queryParams","textContent"],[1,"list-group-item"],[1,"btn","btn-danger","rounded-0","m-0",3,"click"],[1,"main-content","m-0","p-0","overflow-y-hidden"],[1,"list-group-item","rounded-0","m-0",3,"click","routerLink","queryParams","textContent"]],template:function(e,i){e&1&&m(0,zt,4,3)(1,Gt,2,0,"div"),e&2&&c(i.$isReady()?0:1)},dependencies:[Ct,bt,Mt,$],styles:['@charset "UTF-8";[_nghost-%COMP%]{display:block;width:100%;height:100vh}.layout-container[_ngcontent-%COMP%]{display:grid;grid-template-columns:250px 1fr;height:100%;width:100%;overflow:hidden}.sidebar[_ngcontent-%COMP%]{background-color:#f8f9fa;border-right:1px solid #dee2e6;overflow-y:auto;padding:1rem}.main-content[_ngcontent-%COMP%]{background-color:#fff;overflow-y:auto;padding:2rem}']})};function Ht(t,o){t&1&&d(0,"app-layout")}function Qt(t,o){t&1&&d(0,"app-login")}function Jt(t,o){if(t&1&&m(0,Ht,1,0,"app-layout")(1,Qt,1,0,"app-login"),t&2){let e,i=s();c(!((e=i.$session())==null||e.auth==null)&&e.auth.isLogin?0:1)}}function Kt(t,o){t&1&&(r(0,"div"),g(1,"loading..."),p())}var D=class t{#t=a(k);auth=a(x);session=a(A);$domain=J("domain");$session=this.session.$session;$isReady=_(!1);constructor(){this.auth.check().pipe(v(this.#t)).pipe(u(()=>this.$isReady.set(!0))).pipe(h(1)).subscribe()}static \u0275fac=function(e){return new(e||t)};static \u0275cmp=f({type:t,selectors:[["app-component-root"]],hostAttrs:[1,"p-0","m-0"],decls:2,vars:1,template:function(e,i){e&1&&m(0,Jt,2,1)(1,Kt,2,0,"div"),e&2&&c(i.$isReady()?0:1)},dependencies:[I,L,R],encapsulation:2})};var F=class t{static \u0275fac=function(e){return new(e||t)};static \u0275cmp=f({type:t,selectors:[["app-root"]],decls:1,vars:0,template:function(e,i){e&1&&d(0,"app-component-root")},dependencies:[D],encapsulation:2})};ut(F,Vt).catch(t=>console.error(t));
