import{a as ht}from"./chunk-GUTABKTZ.js";import{B as Et,d as lt,i as ut,t as ft,w as pt,x as A}from"./chunk-QS74EYGS.js";import{A as L,D as j,E as $,Fb as y,Ib as T,J as x,Jb as w,Kb as E,L as V,Lb as ct,Mb as h,Nb as g,P as K,Q,S as v,Sb as _,Ta as Y,Y as u,Ya as G,ba as a,db as J,ec as dt,f as Tt,fb as l,hb as X,i as F,ib as tt,j as f,ka as W,la as U,m as S,na as d,o as H,oa as Z,ob as b,pb as et,qb as nt,sb as it,t as D,tb as ot,tc as k,ub as st,vb as R,wa as q,wb as rt,xa as z,xb as at,ya as P,z as B,za as p}from"./chunk-J3CZU5IE.js";function m(t){return t!=null}function gt(t){return(t||document.body).getBoundingClientRect()}function kt(t){return r=>new F(e=>{let i=o=>t.run(()=>e.next(o)),n=o=>t.run(()=>e.error(o)),s=()=>t.run(()=>e.complete());return r.subscribe({next:i,error:n,complete:s})})}function At(t){let{transitionDelay:r,transitionDuration:e}=window.getComputedStyle(t),i=parseFloat(r),n=parseFloat(e);return(i+n)*1e3}var Ot=()=>{},Mt={getTransitionTimerDelayMs:()=>5},I=new Map,O=(t,r,e,i)=>{let n=i.context||{},s=I.get(r);if(s)switch(i.runningTransition){case"continue":return S;case"stop":t.run(()=>s.transition$.complete()),n=Object.assign(s.context,n),I.delete(r)}let o=e(r,i.animation,n)||Ot;if(!i.animation||window.getComputedStyle(r).transitionProperty==="none")return t.run(()=>o()),H(void 0).pipe(kt(t));let c=new f,N=new f,C=c.pipe(V(!0));I.set(r,{transition$:c,complete:()=>{N.next(),N.complete()},context:n});let Ct=At(r);return t.runOutsideAngular(()=>{let Dt=B(r,"transitionend").pipe(v(C),j(({target:Rt})=>Rt===r)),Pt=L(Ct+Mt.getTransitionTimerDelayMs()).pipe(v(C));$(Pt,Dt,N).pipe(v(C)).subscribe(()=>{I.delete(r),t.run(()=>{o(),c.next(),c.complete()})})}),c.asObservable()};var Yt=(()=>{let t=()=>/iPad|iPhone|iPod/.test(navigator.userAgent)||/Macintosh/.test(navigator.userAgent)&&navigator.maxTouchPoints&&navigator.maxTouchPoints>2,r=()=>/Android/.test(navigator.userAgent);return typeof navigator<"u"?!!navigator.userAgent&&(t()||r()):!1})();var Gt=["a[href]","button:not([disabled])",'input:not([disabled]):not([type="hidden"])',"select:not([disabled])","textarea:not([disabled])","[contenteditable]",'[tabindex]:not([tabindex="-1"])'].join(", ");var vt=(()=>{class t{constructor(){this.animation=!0}static{this.\u0275fac=function(i){return new(i||t)}}static{this.\u0275prov=u({token:t,factory:t.\u0275fac,providedIn:"root"})}}return t})();var Ft=["ngbNavOutlet",""],St=t=>({$implicit:t});function Ht(t,r){}function Bt(t,r){if(t&1&&(rt(0,"div",0),tt(1,Ht,0,0,"ng-template",1),at()),t&2){let e=w().$implicit,i=w();R("item",e)("nav",i.nav)("role",i.paneRole),Y(),R("ngTemplateOutlet",(e.contentTpl==null?null:e.contentTpl.templateRef)||null)("ngTemplateOutletContext",dt(5,St,e.active||i.isPanelTransitioning(e)))}}function Lt(t,r){if(t&1&&et(0,Bt,2,7,"div",0),t&2){let e=r.$implicit,i=w();nt(e.isPanelInDom()||i.isPanelTransitioning(e)?0:-1)}}var jt=(()=>{class t{constructor(){this._ngbConfig=a(vt),this.destroyOnHide=!0,this.orientation="horizontal",this.roles="tablist",this.keyboard=!0}get animation(){return this._animation??this._ngbConfig.animation}set animation(e){this._animation=e}static{this.\u0275fac=function(i){return new(i||t)}}static{this.\u0275prov=u({token:t,factory:t.\u0275fac,providedIn:"root"})}}return t})(),yt=t=>m(t)&&t!=="",$t=0,xt=(()=>{class t{constructor(){this.templateRef=a(G)}static{this.\u0275fac=function(i){return new(i||t)}}static{this.\u0275dir=l({type:t,selectors:[["ng-template","ngbNavContent",""]]})}}return t})();var wt=(()=>{class t{constructor(){this._nav=a(_t),this._nativeElement=a(p).nativeElement,this.disabled=!1,this.shown=new d,this.hidden=new d}ngOnInit(){m(this.domId)||(this.domId=`ngb-nav-${$t++}`)}get active(){return this._nav.activeId===this.id}get id(){return yt(this._id)?this._id:this.domId}get panelDomId(){return`${this.domId}-panel`}isPanelInDom(){return(m(this.destroyOnHide)?!this.destroyOnHide:!this._nav.destroyOnHide)||this.active}isNgContainer(){return this._nativeElement.nodeType===Node.COMMENT_NODE}static{this.\u0275fac=function(i){return new(i||t)}}static{this.\u0275dir=l({type:t,selectors:[["","ngbNavItem",""]],contentQueries:function(i,n,s){if(i&1&&E(s,xt,4),i&2){let o;h(o=g())&&(n.contentTpl=o.first)}},hostAttrs:[1,"nav-item"],inputs:{destroyOnHide:"destroyOnHide",disabled:"disabled",domId:"domId",_id:[0,"ngbNavItem","_id"]},outputs:{shown:"shown",hidden:"hidden"},exportAs:["ngbNavItem"]})}}return t})(),_t=(()=>{class t{constructor(e){this.role=e,this._config=a(jt),this._cd=a(k),this._document=a(W),this._nativeElement=a(p).nativeElement,this.destroyRef=a(U),this._navigatingWithKeyboard=!1,this.activeIdChange=new d,this.animation=this._config.animation,this.destroyOnHide=this._config.destroyOnHide,this.orientation=this._config.orientation,this.roles=this._config.roles,this.keyboard=this._config.keyboard,this.shown=new d,this.hidden=new d,this.navItemChange$=new f,this.navChange=new d}click(e){e.disabled||this._updateActiveId(e.id)}onFocusout({relatedTarget:e}){this._nativeElement.contains(e)||(this._navigatingWithKeyboard=!1)}onKeyDown(e){if(this.roles!=="tablist"||!this.keyboard)return;let i=this.links.filter(o=>!o.navItem.disabled),{length:n}=i,s=-1;if(i.forEach((o,c)=>{o.nativeElement===this._document.activeElement&&(s=c)}),n){switch(e.key){case"ArrowUp":case"ArrowLeft":s=(s-1+n)%n;break;case"ArrowRight":case"ArrowDown":s=(s+1)%n;break;case"Home":s=0;break;case"End":s=n-1;break}this.keyboard==="changeWithArrows"&&this.select(i[s].navItem.id),i[s].nativeElement.focus(),this._navigatingWithKeyboard=!0,e.preventDefault()}}select(e){this._updateActiveId(e,!1)}ngAfterContentInit(){if(!m(this.activeId)){let e=this.items.first?this.items.first.id:null;yt(e)&&(this._updateActiveId(e,!1),this._cd.detectChanges())}this.items.changes.pipe(A(this.destroyRef)).subscribe(()=>this._notifyItemChanged(this.activeId))}ngOnChanges({activeId:e}){e&&!e.firstChange&&this._notifyItemChanged(e.currentValue)}_updateActiveId(e,i=!0){if(this.activeId!==e){let n=!1;i&&this.navChange.emit({activeId:this.activeId,nextId:e,preventDefault:()=>{n=!0}}),n||(this.activeId=e,this.activeIdChange.emit(e),this._notifyItemChanged(e))}}_notifyItemChanged(e){this.navItemChange$.next(this._getItemById(e))}_getItemById(e){return this.items&&this.items.find(i=>i.id===e)||null}static{this.\u0275fac=function(i){return new(i||t)(P("role"))}}static{this.\u0275dir=l({type:t,selectors:[["","ngbNav",""]],contentQueries:function(i,n,s){if(i&1&&E(s,wt,4)(s,It,5),i&2){let o;h(o=g())&&(n.items=o),h(o=g())&&(n.links=o)}},hostAttrs:[1,"nav"],hostVars:4,hostBindings:function(i,n){i&1&&T("keydown.arrowLeft",function(o){return n.onKeyDown(o)})("keydown.arrowRight",function(o){return n.onKeyDown(o)})("keydown.arrowDown",function(o){return n.onKeyDown(o)})("keydown.arrowUp",function(o){return n.onKeyDown(o)})("keydown.Home",function(o){return n.onKeyDown(o)})("keydown.End",function(o){return n.onKeyDown(o)})("focusout",function(o){return n.onFocusout(o)}),i&2&&(b("aria-orientation",n.orientation==="vertical"&&n.roles==="tablist"?"vertical":void 0)("role",n.role?n.role:n.roles?"tablist":void 0),_("flex-column",n.orientation==="vertical"))},inputs:{activeId:"activeId",animation:"animation",destroyOnHide:"destroyOnHide",orientation:"orientation",roles:"roles",keyboard:"keyboard"},outputs:{activeIdChange:"activeIdChange",shown:"shown",hidden:"hidden",navChange:"navChange"},exportAs:["ngbNav"],features:[q]})}}return t})(),It=(()=>{class t{constructor(e){this.role=e,this.navItem=a(wt),this.nav=a(_t),this.nativeElement=a(p).nativeElement}get tabindex(){return this.nav.keyboard===!1?this.navItem.disabled?-1:void 0:this.nav._navigatingWithKeyboard||this.navItem.disabled||!this.navItem.active?-1:void 0}static{this.\u0275fac=function(i){return new(i||t)(P("role"))}}static{this.\u0275dir=l({type:t,selectors:[["","ngbNavLink",""]],hostAttrs:[1,"nav-link"],hostVars:12,hostBindings:function(i,n){i&2&&(y("id",n.navItem.domId),b("role",n.role?n.role:n.nav.roles?"tab":void 0)("tabindex",n.tabindex)("aria-controls",n.navItem.isPanelInDom()?n.navItem.panelDomId:null)("aria-selected",n.navItem.active)("aria-disabled",n.navItem.disabled),_("nav-item",n.navItem.isNgContainer())("active",n.navItem.active)("disabled",n.navItem.disabled))}})}}return t})(),Ie=(()=>{class t extends It{static{this.\u0275fac=(()=>{let e;return function(n){return(e||(e=z(t)))(n||t)}})()}static{this.\u0275dir=l({type:t,selectors:[["button","ngbNavLink",""]],hostAttrs:["type","button"],hostVars:1,hostBindings:function(i,n){i&1&&T("click",function(){return n.nav.click(n.navItem)}),i&2&&y("disabled",n.navItem.disabled)},features:[X]})}}return t})();var Vt=({classList:t})=>(t.remove("show"),()=>t.remove("active")),Kt=(t,r)=>{r&&gt(t),t.classList.add("show")},bt=(()=>{class t{constructor(){this.nativeElement=a(p).nativeElement}static{this.\u0275fac=function(i){return new(i||t)}}static{this.\u0275dir=l({type:t,selectors:[["","ngbNavPane",""]],hostAttrs:[1,"tab-pane"],hostVars:5,hostBindings:function(i,n){i&2&&(y("id",n.item.panelDomId),b("role",n.role?n.role:n.nav.roles?"tabpanel":void 0)("aria-labelledby",n.item.domId),_("fade",n.nav.animation))},inputs:{item:"item",nav:"nav",role:"role"}})}}return t})(),Ne=(()=>{class t{constructor(){this._cd=a(k),this._ngZone=a(Z),this._activePane=null}isPanelTransitioning(e){return this._activePane?.item===e}ngAfterViewInit(){this._updateActivePane(),this.nav.navItemChange$.pipe(A(this.nav.destroyRef),Q(this._activePane?.item||null),x(),K(1)).subscribe(e=>{let i={animation:this.nav.animation,runningTransition:"stop"};this._cd.detectChanges(),this._activePane?O(this._ngZone,this._activePane.nativeElement,Vt,i).subscribe(()=>{let n=this._activePane?.item;this._activePane=this._getPaneForItem(e),this._cd.markForCheck(),this._activePane&&(this._activePane.nativeElement.classList.add("active"),O(this._ngZone,this._activePane.nativeElement,Kt,i).subscribe(()=>{e&&(e.shown.emit(),this.nav.shown.emit(e.id))})),n&&(n.hidden.emit(),this.nav.hidden.emit(n.id))}):this._updateActivePane()})}_updateActivePane(){this._activePane=this._getActivePane(),this._activePane?.nativeElement.classList.add("show","active")}_getPaneForItem(e){return this._panes&&this._panes.find(i=>i.item===e)||null}_getActivePane(){return this._panes&&this._panes.find(e=>e.item.active)||null}static{this.\u0275fac=function(i){return new(i||t)}}static{this.\u0275cmp=J({type:t,selectors:[["","ngbNavOutlet",""]],viewQuery:function(i,n){if(i&1&&ct(bt,5),i&2){let s;h(s=g())&&(n._panes=s)}},hostAttrs:[1,"tab-content"],inputs:{paneRole:"paneRole",nav:[0,"ngbNavOutlet","nav"]},attrs:Ft,decls:2,vars:0,consts:[["ngbNavPane","",3,"item","nav","role"],[3,"ngTemplateOutlet","ngTemplateOutletContext"]],template:function(i,n){i&1&&ot(0,Lt,1,1,null,null,it),i&2&&st(n.nav.items)},dependencies:[bt,lt],encapsulation:2,changeDetection:0})}}return t})();var M=Tt(Et());var Nt=class t{siteInfo=a(ht);session=a(pt);$domain=this.siteInfo.$domain;$session=this.session.$session;apiEndpoint=ft.napi.endpoint;http=a(ut);constructor(){}ext(r){return r==="image/jpeg"||r==="image/jpg"?".jpg":r==="image/png"?".png":r==="image/gif"?".gif":r==="image/webp"?".webp":""}upload(r={}){let e=r.file,i=r.path,n=new FormData;{let o=this.$domain(),c=this.$session()||{};n.append("data.site.domain",o),n.append("auth.sid",M.default.get(c,"auth.sid")),n.append("auth.isLogin",M.default.get(c,"auth.isLogin")),n.append("path",i),n.append("file",e)}let s=`${this.apiEndpoint}/api/cdn/upload`;return this.http.post(s,n,{}).pipe(D(o=>({results:o.results||{}})))}static \u0275fac=function(e){return new(e||t)};static \u0275prov=u({token:t,factory:t.\u0275fac,providedIn:"root"})};export{xt as a,wt as b,_t as c,Ie as d,Ne as e,Nt as f};
