@if ($isReady()) {
	<div class="card h-100 user-select-none">
		<div class="card-header rounded-0">
			<strong>キャスト一覧</strong>
		</div>
		<div class="card-body p-1 overflow-y-scroll">
			<div class="card">
				<div class="card-header p-0 px-1">
					<span>検索</span>
				</div>
				<div class="card-body p-1">
					<div class="d-flex flex-row flex-wrap">
						<div class="input-group input-group-sm w-auto">
							<div class="input-group-text">
								キャスト名
							</div>
							<input class="form-control form-control-sm"
							       type="text"
							       [ngModel]="$q_castName()"
							       (ngModelChange)="$q_castName.set($event);action_load_castList();">
						</div>
					</div>
				</div>
			</div>
			<div class="card my-1">
				<div class="card-header p-0 px-1">
					<span>一覧</span>
				</div>
				<div class="card-body p-1">
					<div class="d-flex flex-wrap gap-1"
					     [nxtSortablejs]="$castList()"
					     [config]="castListSortableOptions">
						@for (cast of $castList(); track cast.uid; ) {
							<div>
								<div class="card m-0 h-100"
								     style="width:200px;">
									<div class="card-header p-1 d-flex flex-row justify-content-between g-1">
										<i class="fa fa-arrows handle fa-hover cursor-move handle"></i>
										<i class="fa fa-times text-danger fa-hover cursor-pointer"
										   (click)="action_remove_cast(cast);"></i>
									</div>
									<div class="card-body p-0">
										<div class="p-0">
											@if (cast.imageSrc; as src) {
												<img class="w-100 cursor-pointer"
												     [src]="src"
												     routerLink="/castEdit"
												     [queryParams]="{domain:navigation.$domain(),uid:cast.uid}"
												     loading="lazy"/>
											}
										</div>
										<div class="px-1"
										     style="white-space:nowrap;text-overflow: ellipsis;overflow:hidden;">
											<a routerLink="/castEdit"
											   [queryParams]="{domain:navigation.$domain(),uid:cast.uid}"
											   [textContent]="cast.name"></a>
										</div>
									</div>
									<div class="card-footer p-1 text-center bg-white">
										<button class="btn btn-sm "
										        [class.btn-success]="cast.viewFlag"
										        [class.border]="!cast.viewFlag"
										        [class.disabled]="cast._?.isWait"
										        [disabled]="cast._?.isWait"
										        (click)="action_cast_viewFlag(cast);"
										        [textContent]="cast.viewFlag ? '公開中' : '非公開'">
										</button>
									</div>
								</div>
							</div>
						}
					</div>
				</div>
			</div>
		</div>
	</div>
} @else {
	<div>loading...</div>
}